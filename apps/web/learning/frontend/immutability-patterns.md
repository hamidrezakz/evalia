# Immutability in JavaScript & React

## مقدمه

Immutability (تغییرناپذیری) یعنی داده‌ها را به‌جای تغییر مستقیم، همیشه با یک نسخه جدید جایگزین کنیم. این اصل در جاوااسکریپت و مخصوصاً ری‌اکت اهمیت زیادی دارد.

---

## چرا Immutability مهم است؟

- باعث می‌شود state قابل پیش‌بینی و قابل دیباگ باشد.
- ری‌اکت فقط زمانی متوجه تغییر state می‌شود که یک شیء جدید ساخته شود (reference جدید).
- از بروز باگ‌های عجیب جلوگیری می‌کند.

---

## مثال ساده (اشتباه و درست)

### اشتباه (تغییر مستقیم):

```js
const arr = [1, 2, 3];
arr.push(4); // اشتباه: arr تغییر کرد
```

### درست (کپی جدید):

```js
const arr = [1, 2, 3];
const newArr = [...arr, 4]; // درست: newArr جدید است
```

### در ری‌اکت:

```js
const [state, setState] = useState({ count: 0 });
// اشتباه:
state.count++;
setState(state); // ری‌اکت متوجه تغییر نمی‌شود

// درست:
setState({ ...state, count: state.count + 1 });
```

---

## ابزارهای کپی (spread, Object.assign, map)

- Spread: `{ ...obj }`, `[...arr]`
- Object.assign: `Object.assign({}, obj)`
- map/filter/reduce برای آرایه‌ها

---

## نکات حرفه‌ای

- همیشه state را immutable نگه دارید.
- برای آرایه‌ها و آبجکت‌های تو در تو، از کتابخانه‌هایی مثل immer هم می‌توانید استفاده کنید.

---

## جمع‌بندی

Immutability پایه‌ی معماری ری‌اکت و بسیاری از فریم‌ورک‌های مدرن است. با تمرین، این الگو برایتان عادی و طبیعی می‌شود.
